---
title: "Dplyr"
description: "Dplyr is a data transformation library in the collection Tidyverse."
format: html
from: markdown+emoji
categories:
  - language
  - data science
---

## Data Wrangling with dplyr

Load dplyr
: ```R
library(dplyr)
``` 

The dplyr package uses the pipe-command to pass the result of one transformation to the next:
```R
dataset %>%
    filter(column1 == "Value") %>%
    arrange(column2)
```

Filter
: ```R
filter(column1 == "Value")
```

Order / Sort
: ```R
arrange(col1) %>% # ascending
    arrange(desc(col2)) # descending
``` 

Mutate / Change / Add columns
: ```R
mutate(resultCol = col / 1000) 
```

### Aggregation

Summarize / aggregate
: ```R
dataset %>%
    summarize(medianCol1 = median(col1))
```

Aggregation functions  | 
-----------------------|-----
sum                    | `sum()`
mean                   | `mean()`
median                 | `median()`
minimum / maximum      | `min()` / `max()`
first / last position  | `first()` / `last()`
counts                 | `n()` / `n_distinct()`

:  {tbl-colwidths="[50,50]"}

### Group-by

```R
dataset %>%
    group_by(year_col, continent_col) %>% 
    summarize(mean(gpd_col))
```
aggregates only for the groups defined before


